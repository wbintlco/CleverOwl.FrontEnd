#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Optimization;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using CleverOwl.WebApplication;
    
    #line 4 "..\..\Views\Messages\Index.cshtml"
    using Microsoft.AspNet.Identity;
    
    #line default
    #line hidden
    
    #line 3 "..\..\Views\Messages\Index.cshtml"
    using RLI.Common.Managers;
    
    #line default
    #line hidden
    
    #line 2 "..\..\Views\Messages\Index.cshtml"
    using RLI.EntityFramework.EDM;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Messages/Index.cshtml")]
    public partial class _Views_Messages_Index_cshtml : System.Web.Mvc.WebViewPage<List<RLI.Common.DataObjects.ContactModel>>
    {
        public _Views_Messages_Index_cshtml()
        {
        }
        public override void Execute()
        {
WriteLiteral("\r\n");

            
            #line 6 "..\..\Views\Messages\Index.cshtml"
  
    Dictionary<string, string> Locale = ViewBag.Locale;
    ViewBag.Title = Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageMessages"));
    List<RLI.Common.DataObjects.ContactModel> conversations = Model;

    bool iscoordinator = false;
    if ((User.IsInRole("ContentManager") || User.IsInRole("Coordinator") || User.IsInRole("HeadOfDepartment") || User.IsInRole("SchoolDirector") || User.IsInRole("SchoolPrincipal") || User.IsInRole("SeniorCoordinator")) && ViewBag.CurrentUser.Id != User.Identity.GetUserId())
    {

   // if (User.IsInRole("ContentManager") && ViewBag.CurrentUser.Id != User.Identity.GetUserId())
   // {
        iscoordinator = true;
    }


            
            #line default
            #line hidden
WriteLiteral(@"

<style>
    .page-banner {
        margin-top: 100px;
        height: fit-content;
        margin-bottom: 30px;
        background-color: #ffffff;
    }

    .page-body {
        padding: 0;
        margin-bottom: 50px;
    }

    .profilePhoto {
        width: 3.2rem;
        height: 3.2rem;
        object-fit: cover;
        border-radius: 50%;
    }

    .conversationTab-newMessage {
        background: linear-gradient(90deg, rgba(89, 194, 185, 0.4)0%, rgba(0,0,0,0) 8%);
        border-radius: 25px;
    }

    .deleteIcon {
        float: right;
        width: 20px !important;
        height: 20px !important;
        margin-bottom: 5px !important;
    }

    .m-tabs__item-active {
        border-radius: 2rem !important;
        background-color: #f7f8fa !important;
    }

    .input-icons i {
        position: absolute;
    }

    .input-icons {
        width: 100%;
    }

    .icon {
        padding: 10px;
        min-width: 40px;
    }

    .input-field {
        width: 100%;
        /*padding: 10px;
        text-align: center;*/
    }

    ");

WriteLiteral("@media (min-width: 1025px) {\r\n        .msgNote {\r\n            margin-left: 18%;\r\n" +
"        }\r\n    }\r\n\r\n    ");

WriteLiteral("@media (max-width: 1400px) {\r\n    }\r\n\r\n    .m-messenger__message-text a {\r\n      " +
"  color: #fff !important;\r\n    }\r\n\r\n    svg {\r\n        height: 50px !important;\r" +
"\n    }\r\n\r\n\r\n    .m-messenger__message-text p {\r\n        word-break: break-all;\r\n" +
"    }\r\n\r\n    ");

WriteLiteral(@"@media(max-width:991px) {
        .BodyParent #m_aside_left {
            display: none !important;
        }

        .messgIcon {
            display: none;
        }
        /*.mobile_tablet_hidden {
            display: none;
        }*/ /*.mobile_tablet_hidden {
            display: none;
        }*/
    }

    ");

WriteLiteral(@"@media(min-width:992px) {
        /*.desktop_hidden {
            display: none;
        }*/

        .seperator_mssg_contact {
            display: none;
        }
    }

    .m-portlet__body {
        padding-top: 1em !important;
    }

    ");

WriteLiteral(@"@media(max-width:991px) {

        .mssgIcon {
            display: none;
        }

        .m-messenger .m-messenger__messages .m-messenger__message.m-messenger__message--out {
            padding-left: 0px !important;
        }
    }

    .blockUI.blockMsg.blockElement {
        top: 50% !important;
        left: 50% !important;
    }

    .coordinator {
        pointer-events: none;
        opacity: 0.5;
        cursor: not-allowed;
        filter: grayscale(100%);
    }
</style>

<section");

WriteLiteral(" class=\"page-banner\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"container\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"page-title-wrapper\"");

WriteLiteral(">\r\n            <div>\r\n                <ul");

WriteLiteral(" class=\"bradcurmed\"");

WriteLiteral(">\r\n                    <li><a");

WriteAttribute("href", Tuple.Create(" href=\"", 3620), Tuple.Create("\"", 3659)
            
            #line 158 "..\..\Views\Messages\Index.cshtml"
, Tuple.Create(Tuple.Create("", 3627), Tuple.Create<System.Object, System.Int32>(Url.Action("Index","Dashboard")
            
            #line default
            #line hidden
, 3627), false)
);

WriteLiteral(" rel=\"noopener noreferrer\"");

WriteLiteral(">");

            
            #line 158 "..\..\Views\Messages\Index.cshtml"
                                                                                        Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageWall")));

            
            #line default
            #line hidden
WriteLiteral("</a></li>\r\n                    <li><a");

WriteAttribute("href", Tuple.Create(" href=\"", 3793), Tuple.Create("\"", 3831)
            
            #line 159 "..\..\Views\Messages\Index.cshtml"
, Tuple.Create(Tuple.Create("", 3800), Tuple.Create<System.Object, System.Int32>(Url.Action("Index","Messages")
            
            #line default
            #line hidden
, 3800), false)
);

WriteLiteral(" rel=\"noopener noreferrer\"");

WriteLiteral(">");

            
            #line 159 "..\..\Views\Messages\Index.cshtml"
                                                                                       Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageMessages")));

            
            #line default
            #line hidden
WriteLiteral("</a></li>\r\n                </ul>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"row m--margin-top-20-desktop\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"col-lg-1 m-auto mssgIcon\"");

WriteLiteral(">\r\n");

WriteLiteral("                    ");

            
            #line 164 "..\..\Views\Messages\Index.cshtml"
               Write(Html.Partial("~/Views/SharedSvgs/_MessageIcon.cshtml"));

            
            #line default
            #line hidden
WriteLiteral("\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"col-lg-5 col-12 m-auto\"");

WriteLiteral(">\r\n                    <h1");

WriteLiteral(" class=\"page-title\"");

WriteLiteral(">");

            
            #line 167 "..\..\Views\Messages\Index.cshtml"
                                      Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageMessages")));

            
            #line default
            #line hidden
WriteLiteral("</h1>\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"col-lg-3  m-auto\"");

WriteLiteral(">\r\n                </div>\r\n                <div");

WriteLiteral(" class=\"col-lg-3 col-12 m-auto\"");

WriteLiteral(">\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    " +
"<!-- /.container -->\r\n</section>\r\n<div");

WriteLiteral(" class=\"page-body\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"container\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"row\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"col-lg-12\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"m-portlet\"");

WriteLiteral(" style=\"margin-top: 10px\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"m-portlet__body\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"row m-auto\"");

WriteLiteral(">\r\n                            <div");

WriteLiteral(" id=\"contacts\"");

WriteLiteral(" class=\"col-lg-4 col-12\"");

WriteLiteral(">\r\n                                <span");

WriteLiteral(" class=\"ml-2\"");

WriteLiteral(">");

            
            #line 187 "..\..\Views\Messages\Index.cshtml"
                                              Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageSearchOrStartANewChat")));

            
            #line default
            #line hidden
WriteLiteral("</span>\r\n                                <div");

WriteLiteral(" class=\"input-icons\"");

WriteLiteral(" style=\"\"");

WriteLiteral(">\r\n                                    <i");

WriteLiteral(" class=\"fas fa-search icon\"");

WriteLiteral(" style=\"margin-top:14px\"");

WriteLiteral("></i>\r\n                                    <input");

WriteLiteral(" id=\"search\"");

WriteLiteral(" class=\"input-field form-control\"");

WriteLiteral(" type=\"text\"");

WriteAttribute("placeholder", Tuple.Create(" placeholder=\"", 5405), Tuple.Create("\"", 5505)
            
            #line 190 "..\..\Views\Messages\Index.cshtml"
                                 , Tuple.Create(Tuple.Create("", 5419), Tuple.Create<System.Object, System.Int32>(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageSearchOrStartANewChat"))
            
            #line default
            #line hidden
, 5419), false)
);

WriteLiteral(" />\r\n                                </div>\r\n                                <div" +
"");

WriteLiteral(" class=\"m-portlet--border-bottom-accent\"");

WriteLiteral(" style=\"max-height:470px; overflow-y: auto;\"");

WriteLiteral(">\r\n                                    <ul");

WriteLiteral(" class=\"m-nav m-nav--active-bg m-nav--active-bg-padding-lg m-nav--font-lg m-nav--" +
"font-bold m--margin-bottom-20 m--margin-top-10 m_nav-active m-messenger m-messen" +
"ger--message-arrow m-messenger--skin-light\"");

WriteLiteral(" id=\"m_nav\"");

WriteLiteral(" role=\"tablist\"");

WriteLiteral(">\r\n\r\n");

WriteLiteral("                                        ");

            
            #line 195 "..\..\Views\Messages\Index.cshtml"
                                   Write(Html.Partial("~/Views/Messages/_Chat.cshtml", conversations));

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n                                    </ul>\r\n                                </" +
"div>\r\n                                ");

WriteLiteral("\r\n                                ");

WriteLiteral("\r\n                            </div>\r\n                            <div");

WriteLiteral(" class=\"col-lg-8 col-12 d-none d-lg-block\"");

WriteLiteral(">\r\n                                <div");

WriteLiteral(" class=\"m-tabs-content\"");

WriteLiteral(" id=\"m_sections\"");

WriteLiteral(">\r\n                                    <div");

WriteLiteral(" id=\"backToContactsBtn\"");

WriteLiteral(" class=\"border-bottom seperator_mssg_contact\"");

WriteLiteral(">\r\n                                        <i");

WriteLiteral(" class=\"fas fa-arrow-left\"");

WriteLiteral(" style=\"font-size: 22px; color: #2a224f\"");

WriteLiteral(">\r\n                                            <span");

WriteLiteral(" class=\"userProfile ml-1\"");

WriteLiteral(" style=\"font-family: Poppins\"");

WriteLiteral("></span>\r\n                                        </i>\r\n                         " +
"           </div>\r\n                                    <div");

WriteLiteral(" class=\"m-portlet__body\"");

WriteLiteral(" id=\"m_section_\"");

WriteLiteral(">\r\n                                        <div");

WriteLiteral(" id=\"m_quick_sidebar_tabs_messenger\"");

WriteLiteral(">\r\n                                            <div");

WriteLiteral(" class=\"m-messenger m-messenger--message-arrow m-messenger--skin-light\"");

WriteLiteral(">\r\n                                                <div");

WriteLiteral(" id=\"loader\"");

WriteLiteral("></div>\r\n                                                <div");

WriteLiteral(" id=\"messenger_messages_container\"");

WriteLiteral(" class=\"m-messenger__messages messenger_messages_container\"");

WriteLiteral(" style=\"max-height:500px;overflow-y:scroll;\"");

WriteLiteral(">\r\n                                                    ");

WriteLiteral("\r\n                                                </div>\r\n                       " +
"                         <div");

WriteLiteral(" class=\"m-messenger__seperator\"");

WriteLiteral("></div>\r\n                                                <div");

WriteLiteral(" class=\"m-messenger__form\"");

WriteLiteral(" style=\"display:none\"");

WriteLiteral(">\r\n                                                    <div");

WriteAttribute("class", Tuple.Create(" class=\"", 8420), Tuple.Create("\"", 8492)
, Tuple.Create(Tuple.Create("", 8428), Tuple.Create("m-messenger__form-controls", 8428), true)
            
            #line 224 "..\..\Views\Messages\Index.cshtml"
           , Tuple.Create(Tuple.Create(" ", 8454), Tuple.Create<System.Object, System.Int32>(iscoordinator ? "coordinator" : ""
            
            #line default
            #line hidden
, 8455), false)
);

WriteLiteral(">\r\n                                                        <input");

WriteLiteral(" id=\"messenger_text_input\"");

WriteLiteral(" type=\"text\"");

WriteLiteral(" name=\"\"");

WriteAttribute("placeholder", Tuple.Create(" placeholder=\"", 8604), Tuple.Create("\"", 8691)
            
            #line 225 "..\..\Views\Messages\Index.cshtml"
                                          , Tuple.Create(Tuple.Create("", 8618), Tuple.Create<System.Object, System.Int32>(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageTypeHere"))
            
            #line default
            #line hidden
, 8618), false)
);

WriteLiteral(" class=\"m-messenger__form-input messenger_text_input\"");

WriteLiteral(" data-user_id=\"\"");

WriteLiteral(">\r\n                                                    </div>\r\n                  " +
"                                  <div");

WriteLiteral(" class=\"m-messenger__form-tools\"");

WriteLiteral(">\r\n\r\n                                                        <a");

WriteLiteral(" id=\"messenger_send_message\"");

WriteAttribute("class", Tuple.Create(" class=\"", 9003), Tuple.Create("\"", 9112)
, Tuple.Create(Tuple.Create("", 9011), Tuple.Create("m-messenger__form-attachment", 9011), true)
, Tuple.Create(Tuple.Create(" ", 9039), Tuple.Create("messenger_send_message", 9040), true)
, Tuple.Create(Tuple.Create(" ", 9062), Tuple.Create("btn-primary", 9063), true)
            
            #line 229 "..\..\Views\Messages\Index.cshtml"
                                                                              , Tuple.Create(Tuple.Create(" ", 9074), Tuple.Create<System.Object, System.Int32>(iscoordinator ? "coordinator" : ""
            
            #line default
            #line hidden
, 9075), false)
);

WriteLiteral(" data-user_id=\"\"");

WriteLiteral(" data-conv_id=\"\"");

WriteLiteral(" style=\"margin-bottom:30px\"");

WriteLiteral(">\r\n                                                            <i");

WriteLiteral(" class=\"la la-send\"");

WriteLiteral(@"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


");

            
            #line 250 "..\..\Views\Messages\Index.cshtml"
 using (Html.BeginForm("GetConversation", "Messages", FormMethod.Post, new { id = "GetConversation" }))
{

    
            
            #line default
            #line hidden
            
            #line 253 "..\..\Views\Messages\Index.cshtml"
Write(Html.AntiForgeryToken());

            
            #line default
            #line hidden
            
            #line 253 "..\..\Views\Messages\Index.cshtml"
                            
    
            
            #line default
            #line hidden
            
            #line 254 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("id", ""));

            
            #line default
            #line hidden
            
            #line 254 "..\..\Views\Messages\Index.cshtml"
                          
    
            
            #line default
            #line hidden
            
            #line 255 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("toUser_id", ""));

            
            #line default
            #line hidden
            
            #line 255 "..\..\Views\Messages\Index.cshtml"
                                 
    
            
            #line default
            #line hidden
            
            #line 256 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("newMessage", false));

            
            #line default
            #line hidden
            
            #line 256 "..\..\Views\Messages\Index.cshtml"
                                     
}

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n");

            
            #line 260 "..\..\Views\Messages\Index.cshtml"
 using (Html.BeginForm("SearchChat", "Messages", FormMethod.Post, new { id = "SearchChat" }))
{

    
            
            #line default
            #line hidden
            
            #line 263 "..\..\Views\Messages\Index.cshtml"
Write(Html.AntiForgeryToken());

            
            #line default
            #line hidden
            
            #line 263 "..\..\Views\Messages\Index.cshtml"
                            
    
            
            #line default
            #line hidden
            
            #line 264 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("convId", ""));

            
            #line default
            #line hidden
            
            #line 264 "..\..\Views\Messages\Index.cshtml"
                              
    
            
            #line default
            #line hidden
            
            #line 265 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("username", ""));

            
            #line default
            #line hidden
            
            #line 265 "..\..\Views\Messages\Index.cshtml"
                                
}

            
            #line default
            #line hidden
WriteLiteral("\r\n");

            
            #line 268 "..\..\Views\Messages\Index.cshtml"
 using (Html.BeginForm("SendMessage", "Messages", FormMethod.Post, new { id = "SendMessage" }))
{

    
            
            #line default
            #line hidden
            
            #line 271 "..\..\Views\Messages\Index.cshtml"
Write(Html.AntiForgeryToken());

            
            #line default
            #line hidden
            
            #line 271 "..\..\Views\Messages\Index.cshtml"
                            
    
            
            #line default
            #line hidden
            
            #line 272 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("converId", ""));

            
            #line default
            #line hidden
            
            #line 272 "..\..\Views\Messages\Index.cshtml"
                                
    
            
            #line default
            #line hidden
            
            #line 273 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("message", ""));

            
            #line default
            #line hidden
            
            #line 273 "..\..\Views\Messages\Index.cshtml"
                               
    
            
            #line default
            #line hidden
            
            #line 274 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("fromUserID", ""));

            
            #line default
            #line hidden
            
            #line 274 "..\..\Views\Messages\Index.cshtml"
                                  
    
            
            #line default
            #line hidden
            
            #line 275 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("toUserID", ""));

            
            #line default
            #line hidden
            
            #line 275 "..\..\Views\Messages\Index.cshtml"
                                
}

            
            #line default
            #line hidden
            
            #line 277 "..\..\Views\Messages\Index.cshtml"
 using (Html.BeginForm("GetPreviousMessages", "Messages", FormMethod.Post, new { id = "GetPreviousMessages" }))
{

    
            
            #line default
            #line hidden
            
            #line 280 "..\..\Views\Messages\Index.cshtml"
Write(Html.AntiForgeryToken());

            
            #line default
            #line hidden
            
            #line 280 "..\..\Views\Messages\Index.cshtml"
                            
    
            
            #line default
            #line hidden
            
            #line 281 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("conversationid", ""));

            
            #line default
            #line hidden
            
            #line 281 "..\..\Views\Messages\Index.cshtml"
                                      
    
            
            #line default
            #line hidden
            
            #line 282 "..\..\Views\Messages\Index.cshtml"
Write(Html.Hidden("skip", ""));

            
            #line default
            #line hidden
            
            #line 282 "..\..\Views\Messages\Index.cshtml"
                            
}

            
            #line default
            #line hidden
WriteLiteral("\r\n");

WriteLiteral("\r\n");

            
            #line 286 "..\..\Views\Messages\Index.cshtml"
 using (Html.BeginForm("GetUserConversations", "Messages", FormMethod.Post, new { id = "GetUserConversations" }))
{
    
            
            #line default
            #line hidden
            
            #line 288 "..\..\Views\Messages\Index.cshtml"
Write(Html.AntiForgeryToken());

            
            #line default
            #line hidden
            
            #line 288 "..\..\Views\Messages\Index.cshtml"
                            
}

            
            #line default
            #line hidden
WriteLiteral("\r\n");

DefineSection("scripts", () => {

WriteLiteral("\r\n");

WriteLiteral("    ");

            
            #line 292 "..\..\Views\Messages\Index.cshtml"
Write(Scripts.Render("~/bundles/jqueryval"));

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n\r\n\r\n\r\n    <!--Reference the SignalR library. -->\r\n    ");

WriteLiteral("\r\n    <!--Reference the autogenerated SignalR hub script. -->\r\n    ");

WriteLiteral(@"

    <script>

        $(document).ready(function () {


            $('.RenderBody').removeClass('col-md-9');
            $(""#messages"").remove();
            var userNameGlobal = """";
            var skipMessages = 1;
            var getNewMessages = true;
            var globalConversationId = $('.m-nav__item').eq(0).attr(""data-conversation_id"");
");

            
            #line 313 "..\..\Views\Messages\Index.cshtml"
            
            
            #line default
            #line hidden
            
            #line 313 "..\..\Views\Messages\Index.cshtml"
             if (ViewBag.conversationId != null)
            {

            
            #line default
            #line hidden
WriteLiteral("                ");

WriteLiteral("\r\n            globalConversationId = \'");

            
            #line 316 "..\..\Views\Messages\Index.cshtml"
                               Write(ViewBag.conversationId);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n            ");

WriteLiteral("\r\n");

            
            #line 318 "..\..\Views\Messages\Index.cshtml"
            }

            
            #line default
            #line hidden
WriteLiteral("            var globalToUserId = $(\'.m-nav__item\').eq(0).attr(\"data-member_id\");\r" +
"\n");

            
            #line 320 "..\..\Views\Messages\Index.cshtml"
                
            
            #line default
            #line hidden
            
            #line 320 "..\..\Views\Messages\Index.cshtml"
                 if (ViewBag.conversationId != null)
            {

            
            #line default
            #line hidden
WriteLiteral("                ");

WriteLiteral("\r\n            globalToUserId = \'");

            
            #line 323 "..\..\Views\Messages\Index.cshtml"
                         Write(ViewBag.toUserKey);

            
            #line default
            #line hidden
WriteLiteral("\';\r\n            ");

WriteLiteral("\r\n");

            
            #line 325 "..\..\Views\Messages\Index.cshtml"
            }

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n            const minimum_width_of_lg_screen = 992;\r\n            var screenWi" +
"dth = getScreenWidth();\r\n            var permission = true;\r\n            var per" +
"mission2 = true;\r\n            $(window).on(\'resize\', function () {\r\n            " +
"    if (getScreenWidth() !== screenWidth) {\r\n                    screenWidth = $" +
"(this).width();\r\n                    if (screenWidth >= minimum_width_of_lg_scre" +
"en && permission == true) {\r\n                        permission2 = true\r\n       " +
"                 permission = false;\r\n                        $(\'#m_sections\').p" +
"arent().removeClass(\'d-none d-lg-block\');\r\n                        $(\'#contacts\'" +
").addClass(\'d-none d-lg-block\');\r\n                        $(\'.m-nav__item\').each" +
"(function (i, obj) {\r\n                            var conversation_id = $(this)." +
"attr(\"data-conversation_id\");\r\n                            if (conversation_id =" +
"= globalConversationId) {\r\n                               /* $(this).css(\"backgr" +
"ound\", \"#f3f3ff\");*/\r\n                                $(this).find(\'.m-tabs__ite" +
"m\').addClass(\"m-tabs__item--active\");\r\n                            }\r\n          " +
"              });\r\n                    } else if (screenWidth < minimum_width_of" +
"_lg_screen && permission2 == true) {\r\n                        permission = true;" +
"\r\n                        permission2 = false;\r\n                        $(\'.m-na" +
"v__item\').each(function (i, obj) {\r\n                            var conversation" +
"_id = $(this).attr(\"data-conversation_id\");\r\n                            if (con" +
"versation_id == globalConversationId) {\r\n                                $(this)" +
".css(\"background\", \"#ffffff\");\r\n                                $(this).find(\'.m" +
"-tabs__item\').removeClass(\"m-tabs__item--active\");\r\n                            " +
"}\r\n                        });\r\n                    }\r\n                }\r\n\r\n    " +
"        });\r\n\r\n\r\n\r\n            $(\'#messenger_messages_container\').scroll(functio" +
"n () {\r\n                console.log(\"scrolling\");\r\n                var scrollTop" +
" = $(this).scrollTop();\r\n                if (scrollTop <= 0) {\r\n                " +
"    console.log(\'Top reached\');\r\n                    if (getNewMessages == true)" +
" {\r\n                        getPreviousMessages(globalConversationId, skipMessag" +
"es);\r\n                        console.log(\'get new mssgs\');\r\n                   " +
" }\r\n                }\r\n            });\r\n            function getPreviousMessages" +
"(convId, skip) {\r\n                getNewMessages = false;\r\n                conso" +
"le.log(\'getPreviousMessages()\');\r\n                mApp.block(\'#loader\');\r\n      " +
"          $(\"#conversationid\").val(convId);\r\n                $(\"#skip\").val(skip" +
");\r\n                $(\"#GetPreviousMessages\").ajaxSubmit({\r\n                    " +
"beforeSubmit: function () {\r\n                    },\r\n                    success" +
": function (data) {\r\n                        if (data == \"error\") {\r\n           " +
"                 swal(\"");

            
            #line 386 "..\..\Views\Messages\Index.cshtml"
                             Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 386 "..\..\Views\Messages\Index.cshtml"
                                                                                                      Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral("\", \"error\");\r\n                            return;\r\n                        }\r\n\r\n " +
"                       if (data == 404) {\r\n                            mApp.unbl" +
"ock(\'#loader\');\r\n                            return;\r\n                        }\r" +
"\n                        $(\'#newMssgs\').remove();\r\n                        $(\'#m" +
"essenger_messages_container\').prepend(\'<div id=\"newMssgs\"></div>\');\r\n\r\n         " +
"               $(\'#messenger_messages_container\').prepend(data);\r\n              " +
"          $(\'#messenger_messages_container\').scrollTop(\r\n                       " +
"     $(\"#newMssgs\").offset().top - $(\'#messenger_messages_container\').offset().t" +
"op + $(\'#messenger_messages_container\').scrollTop()\r\n                        );\r" +
"\n                        mApp.unblock(\'#loader\');\r\n                        skipM" +
"essages++;\r\n                        getNewMessages = true;\r\n                    " +
"},\r\n                    error: function (xhr, status, error) {\r\n                " +
"        console.log(\"Error In GetConversation !!!!!!!!\");\r\n                     " +
"   mApp.unblock(\'#loader\');\r\n                        getNewMessages = true;\r\n   " +
"                 }\r\n                });\r\n            }\r\n\r\n          function get" +
"Conversations(convId, toUserIid, newMessage) {\r\n            var currentTempMessa" +
"ge = $(\"#messenger_text_input\").val();\r\n              console.log(\'int the getCo" +
"nversations()///////\');\r\n              var element = $(\'.m-portlet\');\r\n         " +
"     element.animate({ scrollTop: element.prop(\"scrollHeight\") }, 10);\r\n        " +
"        $(\"#id\").val(convId);\r\n                $(\"#toUser_id\").val(toUserIid);\r\n" +
"                $(\"#newMessage\").val(newMessage);\r\n                $(\"#GetConver" +
"sation\").ajaxSubmit({\r\n                    beforeSubmit: function () {\r\n        " +
"            },\r\n                    success: function (data) {\r\n                " +
"        if (data == \"error\") {\r\n                            mApp.unblock(\'#m_sec" +
"tion_\');\r\n                            swal(\"");

            
            #line 427 "..\..\Views\Messages\Index.cshtml"
                             Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 427 "..\..\Views\Messages\Index.cshtml"
                                                                                                      Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral(@""", ""error"");
                            return;
                        }

                        $('#messenger_messages_container').empty();
                        $('#messenger_messages_container').append(data);
                        $('.userProfile').empty();
                        $('.userProfile').append(userNameGlobal);

                        globalConversationId = convId;
                        globalToUserId = toUserIid;
                        mApp.unblock('#m_section_');
                        $('.m-messenger__form').show();
                        $(""#messenger_text_input"").val(currentTempMessage);
                        var element = $('#messenger_messages_container');
                        element.animate({ scrollTop: element.prop(""scrollHeight"") }, 10);
                    },
                    error: function (xhr, status, error) {
                        swal(""");

            
            #line 445 "..\..\Views\Messages\Index.cshtml"
                         Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 445 "..\..\Views\Messages\Index.cshtml"
                                                                                                  Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral(@""", ""error"");
                        console.log(""Error In GetConversation !!!!!!!"");
                        mApp.unblock('#m_section_');
                    }
                });
            }

            function getScreenWidth() {
                return $(window).width();
            }

            function GetUserConversations() {
                console.log('int the GetUserConversations()');

                $(""#GetUserConversations"").ajaxSubmit({
                    beforeSubmit: function () {
                    },
                    success: function (data) {
                        if (data == ""error"") {
                            swal(""");

            
            #line 464 "..\..\Views\Messages\Index.cshtml"
                             Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 464 "..\..\Views\Messages\Index.cshtml"
                                                                                                      Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral(@""", ""error"");
                            return;
                        }
                        $('#m_nav').empty();
                        $('#m_nav').append(data);
                        //var element = $('#messenger_messages_container');
                        //element.animate({ scrollTop: 9999999999999999999999 }, 500);
                        mApp.unblock('#m_nav');

                    },
                    error: function (xhr, status, error) {
                        swal(""");

            
            #line 475 "..\..\Views\Messages\Index.cshtml"
                         Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 475 "..\..\Views\Messages\Index.cshtml"
                                                                                                  Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral("\", \"error\");\r\n                        console.log(\"Error In GetUserConversations " +
"!!!!!!!\");\r\n                        mApp.unblock(\'#m_nav\');\r\n                   " +
" }\r\n                });\r\n            }\r\n\r\n\r\n\r\n            $(function () {\r\n     " +
"           // Reference the auto-generated proxy for the hub.\r\n                v" +
"ar moodleSignalRManager1 = $.connection.moodleSignalRManager;\r\n                /" +
"/ Create a function that the hub can call back to display messages.\r\n           " +
"     moodleSignalRManager1.client.addNewMessageToPage = function (type, payload)" +
" {\r\n                    console.log(\'dswdw\');\r\n                    console.log(t" +
"ype);\r\n                    console.log(payload);\r\n\r\n                    getConve" +
"rsations(globalConversationId, globalToUserId, true);\r\n                    GetUs" +
"erConversations();\r\n                    GetChats();\r\n                };\r\n       " +
"         // Start the connection.\r\n                $.connection.hub.start().done" +
"(function () {\r\n                    console.log(\'hiiiii\');\r\n                });\r" +
"\n                var count = 0;\r\n                if (count == 0) {\r\n            " +
"        console.log(\'im here\');\r\n                    console.log(\"aasa\"+globalCo" +
"nversationId);\r\n\r\n                    if (globalConversationId != undefined) {\r\n" +
"                        getConversations(globalConversationId, globalToUserId, f" +
"alse);\r\n                    }\r\n\r\n                    GetChats();\r\n              " +
"      count++;\r\n                }\r\n\r\n            });\r\n\r\n        $(document).on(\'" +
"keyup\', \'#messenger_text_input\', function () {\r\n            const ua = navigator" +
".userAgent;\r\n            var deviceType;\r\n            if (/(tablet|ipad|playbook" +
"|silk)|(android(?!.*mobi))/i.test(ua)) {\r\n                deviceType = \"tablet\";" +
"\r\n            }\r\n            else if (/Mobile|Android|iP(hone|od)|IEMobile|Black" +
"Berry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\r\n       " +
"         deviceType = \"mobile\";\r\n            } else {\r\n                deviceTyp" +
"e = \"desktop\";\r\n            }\r\n\r\n            var keyCode = (event.keyCode ? even" +
"t.keyCode : event.which);\r\n            var path = \'#messenger_text_input\';\r\n    " +
"        var $duplicate = $(path).clone();\r\n            if (keyCode == 13 && devi" +
"ceType == \"desktop\") {\r\n                $(\'#messenger_send_message\').trigger(\'cl" +
"ick\');\r\n            } else if (keyCode == 13 && deviceType != \"desktop\") {\r\n\r\n\r\n" +
"\r\n            }\r\n\r\n        });\r\n            $(document).on(\'click\', \'#messenger_" +
"send_message\', function () {\r\n\r\n                mApp.progress($(\'#messenger_send" +
"_message\'));\r\n                var mssgToSend = $(\'#messenger_text_input\').val();" +
"\r\n                if (mssgToSend != \'\') {\r\n\r\n\r\n                    $(\"#converId\"" +
").val(globalConversationId);\r\n                    $(\"#message\").val($(\'#messenge" +
"r_text_input\').val());\r\n                    $(\"#fromUserID\").val(\'");

            
            #line 549 "..\..\Views\Messages\Index.cshtml"
                                     Write(ViewBag.currentMoodleUserId);

            
            #line default
            #line hidden
WriteLiteral(@"');
                    $(""#toUserID"").val(globalToUserId);
                    $('#messenger_text_input').val("""");
                    $(""#SendMessage"").ajaxSubmit({
                        beforeSubmit: function () {
                        },
                        success: function (data) {
                            if (data == ""error"") {
                                swal(""");

            
            #line 557 "..\..\Views\Messages\Index.cshtml"
                                 Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 557 "..\..\Views\Messages\Index.cshtml"
                                                                                                          Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral(@""", ""error"");
                                return;
                            }
                            $('#messenger_messages_container').empty();
                            $('#messenger_messages_container').append(data);
                            var element = $('#messenger_messages_container');
                            element.animate({ scrollTop: element.prop(""scrollHeight"") }, 10);
                            GetUserConversations();
                            $('#messenger_messages_container').scroll(function () {
                                var scrollTop = $(this).scrollTop();
                                if (scrollTop <= 0) {
                                    console.log('Top reached');
                                    if (getNewMessages == true) {
                                        $('#messenger_messages_container').prepend('<div id=""loader""></div>');
                                        getPreviousMessages(globalConversationId, skipMessages);
                                    }
                                }
                            });
                            mApp.unprogress($('#messenger_send_message'));
                        },
                        error: function (xhr, status, error) {
                           swal(""");

            
            #line 578 "..\..\Views\Messages\Index.cshtml"
                            Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 578 "..\..\Views\Messages\Index.cshtml"
                                                                                                     Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral("\", \"error\");\r\n                            console.log(\"Error In GetConversation !" +
"!!!!!!\");\r\n                            mApp.unblock(\'#m_sections\');\r\n           " +
"                 mApp.unprogress($(\'#messenger_send_message\'));\r\n               " +
"         }\r\n                    });\r\n                }\r\n            });\r\n       " +
"     var conversationItem_before = \'\';\r\n\r\n\r\n            $(document).on(\'click\', " +
"\'.m-nav__item\', function () {\r\n                mApp.block(\'#m_section_\');\r\n     " +
"           $(\'#m_sections\').parent().removeClass(\'d-none d-lg-block\');\r\n        " +
"        $(\'#contacts\').addClass(\'d-none d-lg-block\');\r\n                var conve" +
"rsationTab_before = $(\"li[data-conversation_id=\'\"+ globalConversationId +\"\']\");\r" +
"\n                var index = $(this).attr(\'data-index\');\r\n                if (co" +
"nversationItem_before != \'\') {\r\n                    conversationItem_before.remo" +
"veClass(\'m-tabs__item--active\');\r\n                }\r\n\r\n                if (conve" +
"rsationTab_before != null || conversationTab_before != \'\') {\r\n                  " +
"  conversationTab_before.css(\"background\", \"#ffffff\");\r\n                }\r\n     " +
"           $(\'#conversationItem_\' + index).addClass(\'m-tabs__item--active\');\r\n  " +
"       /*       $(this).css(\"background\", \"#f3f3ff\");*/\r\n\r\n                conve" +
"rsationItem_before = $(\'#conversationItem_\' + index);\r\n                var convi" +
"d = $(this).attr(\'data-conversation_id\');\r\n                var toUserId = $(this" +
").attr(\'data-member_id\');\r\n                globalConversationId = convid;\r\n     " +
"           globalToUserId = toUserId;\r\n                userNameGlobal = $(this)." +
"find(\'.txt\').text();\r\n                getConversations(globalConversationId, glo" +
"balToUserId, false);\r\n            });\r\n\r\n            $(document).on(\'click\', \'#b" +
"ackToContactsBtn\', function () {\r\n                $(\'#contacts\').removeClass(\'d-" +
"none d-lg-block\');\r\n                $(\'#m_sections\').parent().addClass(\'d-none d" +
"-lg-block\');\r\n                $(\'.m-nav__item\').css(\'background\', \"#ffffff\");\r\n " +
"               $(\'.m-tabs__item\').removeClass(\'m-tabs__item--active\');\r\n        " +
"    });\r\n            $(\'#search\').keyup(function () {\r\n\r\n                GetChat" +
"s();\r\n\r\n\r\n            });\r\n\r\n            function GetChats() {\r\n                " +
"mApp.block(\'#m_nav\');\r\n                var userNameToFound = $(\'#search\').val();" +
"\r\n                $(\"#convId\").val(\'");

            
            #line 630 "..\..\Views\Messages\Index.cshtml"
                             Write(ViewBag.currentMoodleUserId);

            
            #line default
            #line hidden
WriteLiteral(@"');
                $(""#username"").val(userNameToFound);
                $(""#SearchChat"").ajaxSubmit({
                    beforeSubmit: function () {
                    },
                    success: function (data) {
                        if (data == ""error"") {
                            swal(""");

            
            #line 637 "..\..\Views\Messages\Index.cshtml"
                             Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 637 "..\..\Views\Messages\Index.cshtml"
                                                                                                      Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral(@""", ""error"");
                            return;
                        }
                        $('#m_nav').empty();
                        $('#m_nav').append(data);
                        mApp.unblock('#m_nav');
                        console.log()
                        if (screenWidth >= minimum_width_of_lg_screen) {
                            $('.m-nav__item').each(function (i, obj) {
                                var conversation_id = $(this).attr(""data-conversation_id"");
                                if (conversation_id == globalConversationId) {
                                    $(this).click();
                                }
                            });
                        }
                    },
                    error: function (xhr, status, error) {
                        swal(""");

            
            #line 654 "..\..\Views\Messages\Index.cshtml"
                         Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageOpps")));

            
            #line default
            #line hidden
WriteLiteral("\", \"");

            
            #line 654 "..\..\Views\Messages\Index.cshtml"
                                                                                                  Write(Html.Raw(UtilitiesManager.GetFieldLabel(Locale, "MessagesPageAnErrorOcuurPleaseTryagainLater")));

            
            #line default
            #line hidden
WriteLiteral("\", \"error\");\r\n                        console.log(\"Error In GeHtmlConversation !!" +
"!!!!!\");\r\n                        mApp.unblock(\'#m_nav\');\r\n                    }" +
"\r\n                });\r\n\r\n            }\r\n\r\n\r\n        });\r\n    </script>\r\n\r\n");

});

        }
    }
}
#pragma warning restore 1591
